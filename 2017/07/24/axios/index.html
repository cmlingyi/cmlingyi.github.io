<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>axios | 湫 | 祭司掌握了与神交流的方法，而世人只看见了神杖</title>

  
  <meta name="author" content="Coco Chen">
  

  
  <meta name="description" content="一觉醒来 水还是温的..">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="axios"/>

  <meta property="og:site_name" content="湫"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="湫" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">湫</a>
    </h1>
    <p class="site-description">祭司掌握了与神交流的方法，而世人只看见了神杖</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>axios</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/07/24/axios/" rel="bookmark">
        <time class="entry-date published" datetime="2017-07-23T18:31:33.000Z">
          2017-07-24
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>一觉醒来 水还是温的..<br><a id="more"></a></p>
<h1 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h1><p>可以在node.js和浏览器中使用的基于promise的HTTP库。</p>
<h2 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h2><p>GET 请求<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Make a request for a user with a given ID </span></div><div class="line">axios.get(<span class="string">'/user?ID=12345'</span>)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(response);</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(error);</div><div class="line">  &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// Optionally the request above could also be done as </span></div><div class="line">axios.get(<span class="string">'/user'</span>, &#123;</div><div class="line">    <span class="attr">params</span>: &#123;</div><div class="line">      <span class="attr">ID</span>: <span class="number">12345</span></div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(response);</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(error);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p>POST 请求<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">axios.post(<span class="string">'/user'</span>, &#123;</div><div class="line">    <span class="attr">firstName</span>: <span class="string">'Fred'</span>,</div><div class="line">    <span class="attr">lastName</span>: <span class="string">'Flintstone'</span></div><div class="line">  &#125;)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(response);</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(error);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p>并发请求<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserAccount</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345'</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserPermissions</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> axios.get(<span class="string">'/user/12345/permissions'</span>);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">axios.all([getUserAccount(), getUserPermissions()])</div><div class="line">  .then(axios.spread(<span class="function"><span class="keyword">function</span> (<span class="params">acct, perms</span>) </span>&#123;</div><div class="line">    <span class="comment">// Both requests are now complete </span></div><div class="line">  &#125;));</div></pre></td></tr></table></figure></p>
<h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="axios-config"><a href="#axios-config" class="headerlink" title="axios(config)"></a>axios(config)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Send a POST request </span></div><div class="line">axios(&#123;</div><div class="line">  <span class="attr">method</span>: <span class="string">'post'</span>,</div><div class="line">  <span class="attr">url</span>: <span class="string">'/user/12345'</span>,</div><div class="line">  <span class="attr">data</span>: &#123;</div><div class="line">    <span class="attr">firstName</span>: <span class="string">'Fred'</span>,</div><div class="line">    <span class="attr">lastName</span>: <span class="string">'Flintstone'</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// GET request for remote image </span></div><div class="line">axios(&#123;</div><div class="line">  <span class="attr">method</span>:<span class="string">'get'</span>,</div><div class="line">  <span class="attr">url</span>:<span class="string">'http://bit.ly/2mTM3nY'</span>,</div><div class="line">  <span class="attr">responseType</span>:<span class="string">'stream'</span></div><div class="line">&#125;)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">  response.data.pipe(fs.createWriteStream(<span class="string">'ada_lovelace.jpg'</span>))</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="axios-url-config"><a href="#axios-url-config" class="headerlink" title="axios(url[, config])"></a>axios(url[, config])</h3><p>默认为GET方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Send a GET request (default method) </span></div><div class="line">axios(<span class="string">'/user/12345'</span>);</div></pre></td></tr></table></figure></p>
<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><h3 id="axios-request-config"><a href="#axios-request-config" class="headerlink" title="axios.request(config)"></a>axios.request(config)</h3><h3 id="axios-get-url-config"><a href="#axios-get-url-config" class="headerlink" title="axios.get(url[, config])"></a>axios.get(url[, config])</h3><h3 id="axios-delete-url-config"><a href="#axios-delete-url-config" class="headerlink" title="axios.delete(url[, config])"></a>axios.delete(url[, config])</h3><h3 id="axios-head-url-config"><a href="#axios-head-url-config" class="headerlink" title="axios.head(url[, config])"></a>axios.head(url[, config])</h3><h3 id="axios-options-url-config"><a href="#axios-options-url-config" class="headerlink" title="axios.options(url[, config])"></a>axios.options(url[, config])</h3><h3 id="axios-post-url-data-config"><a href="#axios-post-url-data-config" class="headerlink" title="axios.post(url[, data[, config]])"></a>axios.post(url[, data[, config]])</h3><h3 id="axios-put-url-data-config"><a href="#axios-put-url-data-config" class="headerlink" title="axios.put(url[, data[, config]])"></a>axios.put(url[, data[, config]])</h3><h3 id="axios-patch-url-data-config"><a href="#axios-patch-url-data-config" class="headerlink" title="axios.patch(url[, data[, config]])"></a>axios.patch(url[, data[, config]])</h3><p>使用这些方法时，url, method, data这些属性都不必在config中配置。</p>
<h2 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h2><h3 id="axios-all-iterable"><a href="#axios-all-iterable" class="headerlink" title="axios.all(iterable)"></a>axios.all(iterable)</h3><h3 id="axios-spread-callback"><a href="#axios-spread-callback" class="headerlink" title="axios.spread(callback)"></a>axios.spread(callback)</h3><p>[M]补充</p>
<h2 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h2><p>可以使用自定义配置来创建一个ansios实例。</p>
<h3 id="axios-create-config"><a href="#axios-create-config" class="headerlink" title="axios.create([config])"></a>axios.create([config])</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> instance = axios.create(&#123;</div><div class="line">  <span class="attr">baseURL</span>: <span class="string">'https://some-domain.com/api/'</span>,</div><div class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>,</div><div class="line">  <span class="attr">headers</span>: &#123;<span class="string">'X-Custom-Header'</span>: <span class="string">'foobar'</span>&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><h4 id="axios-request-config-1"><a href="#axios-request-config-1" class="headerlink" title="axios#request(config)"></a>axios#request(config)</h4><h4 id="axios-get-url-config-1"><a href="#axios-get-url-config-1" class="headerlink" title="axios#get(url[, config])"></a>axios#get(url[, config])</h4><h4 id="axios-delete-url-config-1"><a href="#axios-delete-url-config-1" class="headerlink" title="axios#delete(url[, config])"></a>axios#delete(url[, config])</h4><h4 id="axios-head-url-config-1"><a href="#axios-head-url-config-1" class="headerlink" title="axios#head(url[, config])"></a>axios#head(url[, config])</h4><h4 id="axios-options-url-config-1"><a href="#axios-options-url-config-1" class="headerlink" title="axios#options(url[, config])"></a>axios#options(url[, config])</h4><h4 id="axios-post-url-data-config-1"><a href="#axios-post-url-data-config-1" class="headerlink" title="axios#post(url[, data[, config]])"></a>axios#post(url[, data[, config]])</h4><h4 id="axios-put-url-data-config-1"><a href="#axios-put-url-data-config-1" class="headerlink" title="axios#put(url[, data[, config]])"></a>axios#put(url[, data[, config]])</h4><h4 id="axios-patch-url-data-config-1"><a href="#axios-patch-url-data-config-1" class="headerlink" title="axios#patch(url[, data[, config]])"></a>axios#patch(url[, data[, config]])</h4><h2 id="请求配置"><a href="#请求配置" class="headerlink" title="请求配置"></a>请求配置</h2><p>这些是创建请求时可用的配置选项。其中，只有url是必须的。如果没有指定method，请求默认使用 GET 方法:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">// `url` is the server URL that will be used for the request </span></div><div class="line">  url: <span class="string">'/user'</span>,</div><div class="line"> </div><div class="line">  <span class="comment">// `method` is the request method to be used when making the request </span></div><div class="line">  method: <span class="string">'get'</span>, <span class="comment">// default </span></div><div class="line"> </div><div class="line">  <span class="comment">// `baseURL` will be prepended to `url` unless `url` is absolute. </span></div><div class="line">  <span class="comment">// It can be convenient to set `baseURL` for an instance of axios to pass relative URLs </span></div><div class="line">  <span class="comment">// to methods of that instance. </span></div><div class="line">  baseURL: <span class="string">'https://some-domain.com/api/'</span>,</div><div class="line"> </div><div class="line">  <span class="comment">// `transformRequest` allows changes to the request data before it is sent to the server </span></div><div class="line">  <span class="comment">// This is only applicable for request methods 'PUT', 'POST', and 'PATCH' </span></div><div class="line">  <span class="comment">// The last function in the array must return a string or an instance of Buffer, ArrayBuffer, </span></div><div class="line">  <span class="comment">// FormData or Stream </span></div><div class="line">  transformRequest: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do whatever you want to transform the data </span></div><div class="line"> </div><div class="line">    <span class="keyword">return</span> data;</div><div class="line">  &#125;],</div><div class="line"> </div><div class="line">  <span class="comment">// `transformResponse` allows changes to the response data to be made before </span></div><div class="line">  <span class="comment">// it is passed to then/catch </span></div><div class="line">  transformResponse: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do whatever you want to transform the data </span></div><div class="line"> </div><div class="line">    <span class="keyword">return</span> data;</div><div class="line">  &#125;],</div><div class="line"> </div><div class="line">  <span class="comment">// `headers` are custom headers to be sent </span></div><div class="line">  headers: &#123;<span class="string">'X-Requested-With'</span>: <span class="string">'XMLHttpRequest'</span>&#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `params` are the URL parameters to be sent with the request </span></div><div class="line">  <span class="comment">// Must be a plain object or a URLSearchParams object </span></div><div class="line">  params: &#123;</div><div class="line">    <span class="attr">ID</span>: <span class="number">12345</span></div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `paramsSerializer` is an optional function in charge of serializing `params` </span></div><div class="line">  <span class="comment">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/) </span></div><div class="line">  paramsSerializer: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> Qs.stringify(params, &#123;<span class="attr">arrayFormat</span>: <span class="string">'brackets'</span>&#125;)</div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `data` is the data to be sent as the request body </span></div><div class="line">  <span class="comment">// Only applicable for request methods 'PUT', 'POST', and 'PATCH' </span></div><div class="line">  <span class="comment">// When no `transformRequest` is set, must be of one of the following types: </span></div><div class="line">  <span class="comment">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams </span></div><div class="line">  <span class="comment">// - Browser only: FormData, File, Blob </span></div><div class="line">  <span class="comment">// - Node only: Stream, Buffer </span></div><div class="line">  data: &#123;</div><div class="line">    <span class="attr">firstName</span>: <span class="string">'Fred'</span></div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `timeout` specifies the number of milliseconds before the request times out. </span></div><div class="line">  <span class="comment">// If the request takes longer than `timeout`, the request will be aborted. </span></div><div class="line">  timeout: <span class="number">1000</span>,</div><div class="line"> </div><div class="line">  <span class="comment">// `withCredentials` indicates whether or not cross-site Access-Control requests </span></div><div class="line">  <span class="comment">// should be made using credentials </span></div><div class="line">  withCredentials: <span class="literal">false</span>, <span class="comment">// default </span></div><div class="line"> </div><div class="line">  <span class="comment">// `adapter` allows custom handling of requests which makes testing easier. </span></div><div class="line">  <span class="comment">// Return a promise and supply a valid response (see lib/adapters/README.md). </span></div><div class="line">  adapter: <span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</div><div class="line">    <span class="comment">/* ... */</span></div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `auth` indicates that HTTP Basic auth should be used, and supplies credentials. </span></div><div class="line">  <span class="comment">// This will set an `Authorization` header, overwriting any existing </span></div><div class="line">  <span class="comment">// `Authorization` custom headers you have set using `headers`. </span></div><div class="line">  auth: &#123;</div><div class="line">    <span class="attr">username</span>: <span class="string">'janedoe'</span>,</div><div class="line">    <span class="attr">password</span>: <span class="string">'s00pers3cret'</span></div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `responseType` indicates the type of data that the server will respond with </span></div><div class="line">  <span class="comment">// options are 'arraybuffer', 'blob', 'document', 'json', 'text', 'stream' </span></div><div class="line">  responseType: <span class="string">'json'</span>, <span class="comment">// default </span></div><div class="line"> </div><div class="line">  <span class="comment">// `xsrfCookieName` is the name of the cookie to use as a value for xsrf token </span></div><div class="line">  xsrfCookieName: <span class="string">'XSRF-TOKEN'</span>, <span class="comment">// default </span></div><div class="line"> </div><div class="line">  <span class="comment">// `xsrfHeaderName` is the name of the http header that carries the xsrf token value </span></div><div class="line">  xsrfHeaderName: <span class="string">'X-XSRF-TOKEN'</span>, <span class="comment">// default </span></div><div class="line"> </div><div class="line">  <span class="comment">// `onUploadProgress` allows handling of progress events for uploads </span></div><div class="line">  onUploadProgress: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do whatever you want with the native progress event </span></div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `onDownloadProgress` allows handling of progress events for downloads </span></div><div class="line">  onDownloadProgress: <span class="function"><span class="keyword">function</span> (<span class="params">progressEvent</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do whatever you want with the native progress event </span></div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `maxContentLength` defines the max size of the http response content allowed </span></div><div class="line">  maxContentLength: <span class="number">2000</span>,</div><div class="line"> </div><div class="line">  <span class="comment">// `validateStatus` defines whether to resolve or reject the promise for a given </span></div><div class="line">  <span class="comment">// HTTP response status code. If `validateStatus` returns `true` (or is set to `null` </span></div><div class="line">  <span class="comment">// or `undefined`), the promise will be resolved; otherwise, the promise will be </span></div><div class="line">  <span class="comment">// rejected. </span></div><div class="line">  validateStatus: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> status &gt;= <span class="number">200</span> &amp;&amp; status &lt; <span class="number">300</span>; <span class="comment">// default </span></div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `maxRedirects` defines the maximum number of redirects to follow in node.js. </span></div><div class="line">  <span class="comment">// If set to 0, no redirects will be followed. </span></div><div class="line">  maxRedirects: <span class="number">5</span>, <span class="comment">// default </span></div><div class="line"> </div><div class="line">  <span class="comment">// `httpAgent` and `httpsAgent` define a custom agent to be used when performing http </span></div><div class="line">  <span class="comment">// and https requests, respectively, in node.js. This allows options to be added like </span></div><div class="line">  <span class="comment">// `keepAlive` that are not enabled by default. </span></div><div class="line">  httpAgent: <span class="keyword">new</span> http.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</div><div class="line">  <span class="attr">httpsAgent</span>: <span class="keyword">new</span> https.Agent(&#123; <span class="attr">keepAlive</span>: <span class="literal">true</span> &#125;),</div><div class="line"> </div><div class="line">  <span class="comment">// 'proxy' defines the hostname and port of the proxy server </span></div><div class="line">  <span class="comment">// `auth` indicates that HTTP Basic auth should be used to connect to the proxy, and </span></div><div class="line">  <span class="comment">// supplies credentials. </span></div><div class="line">  <span class="comment">// This will set an `Proxy-Authorization` header, overwriting any existing </span></div><div class="line">  <span class="comment">// `Proxy-Authorization` custom headers you have set using `headers`. </span></div><div class="line">  proxy: &#123;</div><div class="line">    <span class="attr">host</span>: <span class="string">'127.0.0.1'</span>,</div><div class="line">    <span class="attr">port</span>: <span class="number">9000</span>,</div><div class="line">    <span class="attr">auth</span>: &#123;</div><div class="line">      <span class="attr">username</span>: <span class="string">'mikeymike'</span>,</div><div class="line">      <span class="attr">password</span>: <span class="string">'rapunz3l'</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `cancelToken` specifies a cancel token that can be used to cancel the request </span></div><div class="line">  <span class="comment">// (see Cancellation section below for details) </span></div><div class="line">  cancelToken: <span class="keyword">new</span> CancelToken(<span class="function"><span class="keyword">function</span> (<span class="params">cancel</span>) </span>&#123;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="响应模式"><a href="#响应模式" class="headerlink" title="响应模式"></a>响应模式</h2><p>响应包含以下信息:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="comment">// `data` is the response that was provided by the server </span></div><div class="line">  data: &#123;&#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `status` is the HTTP status code from the server response </span></div><div class="line">  status: <span class="number">200</span>,</div><div class="line"> </div><div class="line">  <span class="comment">// `statusText` is the HTTP status message from the server response </span></div><div class="line">  statusText: <span class="string">'OK'</span>,</div><div class="line"> </div><div class="line">  <span class="comment">// `headers` the headers that the server responded with </span></div><div class="line">  <span class="comment">// All header names are lower cased </span></div><div class="line">  headers: &#123;&#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `config` is the config that was provided to `axios` for the request </span></div><div class="line">  config: &#123;&#125;,</div><div class="line"> </div><div class="line">  <span class="comment">// `request` is the request that generated this response </span></div><div class="line">  <span class="comment">// It is the last ClientRequest instance in node.js (in redirects) </span></div><div class="line">  <span class="comment">// and an XMLHttpRequest instance the browser </span></div><div class="line">  request: &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用then时，你会收到这样的响应:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">axios.get(<span class="string">'/user/12345'</span>)</div><div class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(response.data);</div><div class="line">    <span class="built_in">console</span>.log(response.status);</div><div class="line">    <span class="built_in">console</span>.log(response.statusText);</div><div class="line">    <span class="built_in">console</span>.log(response.headers);</div><div class="line">    <span class="built_in">console</span>.log(response.config);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p>如果发生了错误，响应可以通过error对象被使用。</p>
<h2 id="配置默认值"><a href="#配置默认值" class="headerlink" title="配置默认值"></a>配置默认值</h2><h3 id="全局默认值"><a href="#全局默认值" class="headerlink" title="全局默认值"></a>全局默认值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">axios.defaults.baseURL = <span class="string">'https://api.example.com'</span>;</div><div class="line">axios.defaults.headers.common[<span class="string">'Authorization'</span>] = AUTH_TOKEN;</div><div class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded'</span>;</div></pre></td></tr></table></figure>
<h3 id="自定义实例默认值"><a href="#自定义实例默认值" class="headerlink" title="自定义实例默认值"></a>自定义实例默认值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Set config defaults when creating the instance </span></div><div class="line"><span class="keyword">var</span> instance = axios.create(&#123;</div><div class="line">  <span class="attr">baseURL</span>: <span class="string">'https://api.example.com'</span></div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="comment">// Alter defaults after instance has been created </span></div><div class="line">instance.defaults.headers.common[<span class="string">'Authorization'</span>] = AUTH_TOKEN;</div></pre></td></tr></table></figure>
<h2 id="配置优先级"><a href="#配置优先级" class="headerlink" title="配置优先级"></a>配置优先级</h2><p>优先级: lib/defaults.js库 &lt; 实例的 defaults 属性 &lt; 请求的 config 参数，这些配置将会合并，优先级高的属性将会覆盖优先级低的。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Create an instance using the config defaults provided by the library </span></div><div class="line"><span class="comment">// At this point the timeout config value is `0` as is the default for the library </span></div><div class="line"><span class="keyword">var</span> instance = axios.create();</div><div class="line"> </div><div class="line"><span class="comment">// Override timeout default for the library </span></div><div class="line"><span class="comment">// Now all requests will wait 2.5 seconds before timing out </span></div><div class="line">instance.defaults.timeout = <span class="number">2500</span>;</div><div class="line"> </div><div class="line"><span class="comment">// Override timeout for this request as it's known to take a long time </span></div><div class="line">instance.get(<span class="string">'/longRequest'</span>, &#123;</div><div class="line">  <span class="attr">timeout</span>: <span class="number">5000</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>可以在请求或响应被then或catch前拦截它们。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Add a request interceptor </span></div><div class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something before request is sent </span></div><div class="line">    <span class="keyword">return</span> config;</div><div class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something with request error </span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</div><div class="line">  &#125;);</div><div class="line"> </div><div class="line"><span class="comment">// Add a response interceptor </span></div><div class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something with response data </span></div><div class="line">    <span class="keyword">return</span> response;</div><div class="line">  &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something with response error </span></div><div class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure></p>
<p>移除拦截器:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myInterceptor = axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">/*...*/</span>&#125;);</div><div class="line">axios.interceptors.request.eject(myInterceptor);</div></pre></td></tr></table></figure></p>
<p>可以为自定义的axios实例添加拦截器:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> instance = axios.create();</div><div class="line">instance.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">/*...*/</span>&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">axios.get(<span class="string">'/user/12345'</span>)</div><div class="line">  .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (error.response) &#123;</div><div class="line">      <span class="comment">// The request was made and the server responded with a status code </span></div><div class="line">      <span class="comment">// that falls out of the range of 2xx </span></div><div class="line">      <span class="built_in">console</span>.log(error.response.data);</div><div class="line">      <span class="built_in">console</span>.log(error.response.status);</div><div class="line">      <span class="built_in">console</span>.log(error.response.headers);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.request) &#123;</div><div class="line">      <span class="comment">// The request was made but no response was received </span></div><div class="line">      <span class="comment">// `error.request` is an instance of XMLHttpRequest in the browser and an instance of </span></div><div class="line">      <span class="comment">// http.ClientRequest in node.js </span></div><div class="line">      <span class="built_in">console</span>.log(error.request);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="comment">// Something happened in setting up the request that triggered an Error </span></div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'Error'</span>, error.message);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(error.config);</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<p>可以通过validateStatus选项设置错误范围:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">axios.get(<span class="string">'/user/12345'</span>, &#123;</div><div class="line">  <span class="attr">validateStatus</span>: <span class="function"><span class="keyword">function</span> (<span class="params">status</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> status &lt; <span class="number">500</span>; <span class="comment">// Reject only if the status code is greater than or equal to 500 </span></div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>比较简陋 很多扫了一遍 还没有真正去想怎么用<br>未完待续。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>

  
	<div id="comment">
	
	
	<!-- 多说评论框 start -->
	 <div class="ds-thread" data-thread-key="/2017/07/24/axios/" data-title="axios" data-url="http://yoursite.com/2017/07/24/axios/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"cmlingyi"};
	  (function() {
	    var ds = document.createElement('script');
	    ds.type = 'text/javascript';ds.async = true;
	    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
	    ds.charset = 'UTF-8';
	    (document.getElementsByTagName('head')[0] 
	     || document.getElementsByTagName('body')[0]).appendChild(ds);
	  })();
	  </script>
	<!-- 多说公共JS代码 end -->
	
	</div>




    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 Coco Chen
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-91125303-1', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
</body>
</html>